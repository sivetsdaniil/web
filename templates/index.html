{% extends "base.html" %}

{% block title %}–°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ ‚Äî Hotel Booking{% endblock %}

{% block content %}
<section class="hero mb-5">
    <div class="hero__content">
        <p class="badge rounded-pill text-bg-light text-muted mb-2">–ù–∞–π–¥–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä</p>
        <h1 class="display-6 fw-bold mb-3">–ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –æ—Ç–¥—ã—Ö–∞—Ç—å, –º—ã –ø–æ–∑–∞–±–æ—Ç–∏–º—Å—è –æ –∫–æ–º—Ñ–æ—Ä—Ç–µ</h1>
        <p class="lead text-muted mb-4">–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Ü–µ–Ω—ã, —É–¥–æ–±–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–æ–º–µ—Ä–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ ‚Äî –æ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö –¥–µ–ª–æ–≤—ã—Ö –ø–æ–µ–∑–¥–æ–∫ –¥–æ —Å–µ–º–µ–π–Ω—ã—Ö –≤—ã—Ö–æ–¥–Ω—ã—Ö.</p>
        <div class="d-flex flex-wrap gap-2">
            <span class="chip">24/7 –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
            <span class="chip">–ë—ã—Å—Ç—Ä—ã–π –æ–Ω–ª–∞–π–Ω-—á–µ–∫–∏–Ω</span>
            <span class="chip">–ì–∏–±–∫–∞—è –æ—Ç–º–µ–Ω–∞</span>
        </div>
    </div>
    <div class="hero__card shadow-lg">
        <div class="hero__card-body">
            <h5 class="mb-2">–ì–æ—Ç–æ–≤—ã –≤—ã–±—Ä–∞—Ç—å –Ω–æ–º–µ—Ä?</h5>
            <p class="text-muted mb-3">–°—Ä–∞–≤–Ω–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ –∑–∞–±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –∑–∞ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤.</p>
            <a href="#rooms-grid" class="btn btn-primary w-100">–°–º–æ—Ç—Ä–µ—Ç—å –Ω–æ–º–µ—Ä–∞</a>
        </div>
    </div>
</section>

{% if hotels %}
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-3" id="rooms-grid">
        <div>
            <h2 class="h4 mb-1">–î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–æ–º–µ—Ä–∞</h2>
            <div class="text-muted small">–°–≤–æ–±–æ–¥–Ω–æ {{ available_count }} –∏–∑ {{ total_rooms }}</div>
        </div>
        <form method="get" class="d-flex align-items-center gap-2">
            <label for="hotel_id" class="text-muted small mb-0">–û—Ç–µ–ª—å</label>
            <select id="hotel_id" name="hotel_id" class="form-select form-select-sm" onchange="this.form.submit()">
                <option value="" {% if not selected_hotel_id %}selected{% endif %}>–í—Å–µ –æ—Ç–µ–ª–∏</option>
                {% for hotel in hotels %}
                    <option value="{{ hotel.id }}" {% if hotel.id == selected_hotel_id %}selected{% endif %}>{{ hotel.name }}{% if hotel.city %} ‚Äî {{ hotel.city }}{% endif %}</option>
                {% endfor %}
            </select>
            <noscript><button class="btn btn-primary btn-sm" type="submit">–ü–æ–∫–∞–∑–∞—Ç—å</button></noscript>
        </form>
    </div>

    {% if rooms %}
        <div class="row g-4">
            {% for room in rooms %}
                <div class="col-md-4">
                    <div class="card h-100 shadow-hover border-0 overflow-hidden">
                        {% if room.image_filename %}
                            <img src="{{ url_for('static', filename='uploads/' ~ room.image_filename) }}" class="card-img-top" alt="–§–æ—Ç–æ –Ω–æ–º–µ—Ä–∞ {{ room.number }}" style="height: 180px; object-fit: cover;">
                        {% endif %}
                        <div class="card-body d-flex flex-column">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <p class="text-muted small mb-1">{{ room.hotel.name if room.hotel else "–ë–µ–∑ –æ—Ç–µ–ª—è" }}</p>
                                    <h5 class="card-title mb-1">–ù–æ–º–µ—Ä {{ room.number }}</h5>
                                    <p class="card-subtitle text-muted small">{{ room.room_type }}</p>
                                </div>
                                <span class="badge text-bg-primary">–¥–æ {{ room.capacity }} —á–µ–ª.</span>
                            </div>
                            <p class="card-text flex-grow-1 text-muted">
                                {% if room.description %}
                                    {{ room.description[:150] }}{% if room.description|length > 150 %}...{% endif %}
                                {% else %}
                                    –û–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–∑–∂–µ.
                                {% endif %}
                            </p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <div>
                                    <p class="fw-bold mb-0">{{ room.price_per_night }} ‚ÇΩ</p>
                                    <small class="text-muted d-block mb-1">–∑–∞ –Ω–æ—á—å</small>
                                    {% if room.id in active_room_ids %}
                                        <span class="badge text-bg-warning">–ó–∞–Ω—è—Ç —Å–µ–π—á–∞—Å</span>
                                    {% else %}
                                        <span class="badge text-bg-success">–°–≤–æ–±–æ–¥–µ–Ω</span>
                                    {% endif %}
                                </div>
                                <a href="{{ url_for('room_detail', room_id=room.id, hotel_id=selected_hotel_id) }}" class="btn btn-outline-primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% if available_count == 0 %}
            <div class="alert alert-warning mt-4" role="alert">
                –í—Å–µ –æ—Ç–µ–ª–∏ –∑–∞–Ω—è—Ç—ã –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –¥–∞—Ç—ã –∏–ª–∏ –∑–∞–≥–ª—è–Ω–∏—Ç–µ –ø–æ–∑–∂–µ.
            </div>
        {% endif %}
    {% else %}
        <div class="empty-state text-center p-5 rounded-4 shadow-sm">
            <div class="empty-icon mb-3">üõèÔ∏è</div>
            <h5 class="mb-2">–í –≤—ã–±—Ä–∞–Ω–Ω–æ–º –æ—Ç–µ–ª–µ –Ω–µ—Ç –Ω–æ–º–µ—Ä–æ–≤</h5>
            <p class="text-muted mb-0">–í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π –æ—Ç–µ–ª—å.</p>
        </div>
    {% endif %}
{% else %}
    <div class="empty-state text-center p-5 rounded-4 shadow-sm">
        <div class="empty-icon mb-3">üè®</div>
        <h5 class="mb-2">–û—Ç–µ–ª–∏ –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</h5>
        <p class="text-muted mb-0">–°–æ–∑–¥–∞–π—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ—Ç–µ–ª—å –≤ –±–∞–∑–µ.</p>
    </div>
{% endif %}
{% endblock %}


